/*
 * @author John Felix 
 *
 */
package myPharma;

import javax.swing.JOptionPane;
import javax.swing.ListSelectionModel;
import javax.swing.table.DefaultTableModel;

public class StaffUI extends javax.swing.JFrame {

    /**
     * Creates new form StaffUI
     */
    public DB database; // class DB object to handle database services
    public Customer custom; // class Customer object to handle making of sales
    public PharmaDetails pharmaDetails; // class PharmaDetails object to handle setting/details
    public float totalAmount = 0.00f; // stores intermediate total amount
    
    public StaffUI() {
        database = new DB();
        custom = new Customer();
        pharmaDetails = new PharmaDetails();
        // call class PharmaDetails functions to set interface details
        pharmaDetails.fetchCompanyDetails();
        pharmaDetails.fetchMonetaryDetails();
        // general interface components initialization
        initComponents();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        headerPanel = new javax.swing.JPanel();
        titleL = new javax.swing.JLabel();
        footerPanel = new javax.swing.JPanel();
        footerL = new javax.swing.JLabel();
        jTabbedPane1 = new javax.swing.JTabbedPane();
        salesTabPanel = new javax.swing.JPanel();
        drugNameL = new javax.swing.JLabel();
        drugNameTF = new javax.swing.JTextField();
        drugQuantityTF = new javax.swing.JTextField();
        drugQuantityL = new javax.swing.JLabel();
        custNameL = new javax.swing.JLabel();
        custNameTF = new javax.swing.JTextField();
        addJB = new javax.swing.JButton();
        confirmJB = new javax.swing.JButton();
        jScrollPane1 = new javax.swing.JScrollPane();
        salesTable = new javax.swing.JTable();
        totalL = new javax.swing.JLabel();
        totalTF = new javax.swing.JTextField();
        payAmountL = new javax.swing.JLabel();
        balanceL = new javax.swing.JLabel();
        balanceTF = new javax.swing.JTextField();
        purchaseJB = new javax.swing.JButton();
        clearSaleJB = new javax.swing.JButton();
        measurementL = new javax.swing.JLabel();
        measurementCB = new javax.swing.JComboBox<>();
        selectionCheckBox = new javax.swing.JCheckBox();
        measurementFormattedTF = new javax.swing.JFormattedTextField();
        paymentMethodPanel = new javax.swing.JPanel();
        mobilePayL = new javax.swing.JLabel();
        bankPayL = new javax.swing.JLabel();
        cardPayL = new javax.swing.JLabel();
        mobilePayDataL = new javax.swing.JLabel();
        bankPayDataL = new javax.swing.JLabel();
        cardPayDataL = new javax.swing.JLabel();
        payAmountFormattedTF = new javax.swing.JFormattedTextField();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
        setTitle("Sales - MyPHARMA");
        setBackground(new java.awt.Color(255, 255, 255));
        setExtendedState(6);
        setMinimumSize(new java.awt.Dimension(1266, 700));
        addWindowListener(new java.awt.event.WindowAdapter() {
            public void windowClosing(java.awt.event.WindowEvent evt) {
                windowClosingHandler(evt);
            }
            public void windowOpened(java.awt.event.WindowEvent evt) {
                windowOpenedHandler(evt);
            }
        });

        headerPanel.setBackground(new java.awt.Color(204, 255, 255));

        titleL.setFont(new java.awt.Font("Tahoma", 1, 14)); // NOI18N
        titleL.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        titleL.setLabelFor(headerPanel);
        titleL.setText("enterprise title here..");
        titleL.setHorizontalTextPosition(javax.swing.SwingConstants.LEADING);

        javax.swing.GroupLayout headerPanelLayout = new javax.swing.GroupLayout(headerPanel);
        headerPanel.setLayout(headerPanelLayout);
        headerPanelLayout.setHorizontalGroup(
            headerPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(headerPanelLayout.createSequentialGroup()
                .addGap(151, 151, 151)
                .addComponent(titleL, javax.swing.GroupLayout.PREFERRED_SIZE, 1050, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );
        headerPanelLayout.setVerticalGroup(
            headerPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, headerPanelLayout.createSequentialGroup()
                .addContainerGap()
                .addComponent(titleL, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addContainerGap())
        );

        footerPanel.setBackground(new java.awt.Color(204, 255, 255));

        footerL.setFont(new java.awt.Font("Serif", 3, 18)); // NOI18N
        footerL.setForeground(new java.awt.Color(255, 0, 0));
        footerL.setLabelFor(footerPanel);
        footerL.setText("motto/mission statement here...");

        javax.swing.GroupLayout footerPanelLayout = new javax.swing.GroupLayout(footerPanel);
        footerPanel.setLayout(footerPanelLayout);
        footerPanelLayout.setHorizontalGroup(
            footerPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(footerPanelLayout.createSequentialGroup()
                .addContainerGap()
                .addComponent(footerL, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addContainerGap())
        );
        footerPanelLayout.setVerticalGroup(
            footerPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, footerPanelLayout.createSequentialGroup()
                .addComponent(footerL, javax.swing.GroupLayout.DEFAULT_SIZE, 25, Short.MAX_VALUE)
                .addContainerGap())
        );

        jTabbedPane1.setBackground(new java.awt.Color(249, 251, 253));
        jTabbedPane1.setBorder(javax.swing.BorderFactory.createBevelBorder(javax.swing.border.BevelBorder.RAISED, new java.awt.Color(255, 133, 24), new java.awt.Color(255, 133, 24), java.awt.Color.orange, java.awt.Color.orange));
        jTabbedPane1.setToolTipText("");

        salesTabPanel.setBackground(new java.awt.Color(249, 251, 253));
        salesTabPanel.setBorder(javax.swing.BorderFactory.createLineBorder(new java.awt.Color(255, 55, 0)));

        drugNameL.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        drugNameL.setHorizontalAlignment(javax.swing.SwingConstants.RIGHT);
        drugNameL.setLabelFor(drugNameTF);
        drugNameL.setText("Drug Name");

        drugNameTF.setFont(new java.awt.Font("Tahoma", 0, 12)); // NOI18N

        drugQuantityTF.setFont(new java.awt.Font("Tahoma", 0, 12)); // NOI18N
        drugQuantityTF.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyTyped(java.awt.event.KeyEvent evt) {
                numericKeyTypedHandler(evt);
            }
        });

        drugQuantityL.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        drugQuantityL.setHorizontalAlignment(javax.swing.SwingConstants.RIGHT);
        drugQuantityL.setLabelFor(drugQuantityTF);
        drugQuantityL.setText("Drug Quantity");

        custNameL.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        custNameL.setHorizontalAlignment(javax.swing.SwingConstants.RIGHT);
        custNameL.setLabelFor(custNameTF);
        custNameL.setText("Customer Name");

        custNameTF.setFont(new java.awt.Font("Tahoma", 0, 12)); // NOI18N
        custNameTF.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyTyped(java.awt.event.KeyEvent evt) {
                alphabeticKeyTypedHandler(evt);
            }
        });

        addJB.setBackground(new java.awt.Color(204, 255, 204));
        addJB.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        addJB.setText("Add Item");
        addJB.setToolTipText("add item to same customer");
        addJB.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                addJBHandler(evt);
            }
        });

        confirmJB.setBackground(new java.awt.Color(204, 255, 204));
        confirmJB.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        confirmJB.setText("Confirm Item");
        confirmJB.setToolTipText("confirm if item is available");
        confirmJB.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                confirmJBHandler(evt);
            }
        });

        salesTable.setFont(new java.awt.Font("Tahoma", 0, 12)); // NOI18N
        salesTable.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {

            },
            new String [] {
                "Item Name", "Measurement", "Available Quantity", "Item Price", "Sale Quantity", "Sub-Total", "Prescription", "Description"
            }
        ) {
            Class[] types = new Class [] {
                java.lang.String.class, java.lang.String.class, java.lang.Integer.class, java.lang.Float.class, java.lang.Integer.class, java.lang.Float.class, java.lang.String.class, java.lang.String.class
            };
            boolean[] canEdit = new boolean [] {
                false, false, false, false, false, false, false, false
            };

            public Class getColumnClass(int columnIndex) {
                return types [columnIndex];
            }

            public boolean isCellEditable(int rowIndex, int columnIndex) {
                return canEdit [columnIndex];
            }
        });
        salesTable.setToolTipText("select items to purchase");
        salesTable.setGridColor(new java.awt.Color(255, 51, 0));
        salesTable.setSelectionMode(javax.swing.ListSelectionModel.MULTIPLE_INTERVAL_SELECTION);
        salesTable.setShowGrid(true);
        salesTable.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                mouseClickedHandler(evt);
            }
        });
        jScrollPane1.setViewportView(salesTable);

        totalL.setFont(new java.awt.Font("Tahoma", 1, 14)); // NOI18N
        totalL.setHorizontalAlignment(javax.swing.SwingConstants.RIGHT);
        totalL.setLabelFor(totalTF);
        totalL.setText("TOTAL PRICE");

        totalTF.setEditable(false);
        totalTF.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        totalTF.setHorizontalAlignment(javax.swing.JTextField.RIGHT);

        payAmountL.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        payAmountL.setHorizontalAlignment(javax.swing.SwingConstants.RIGHT);
        payAmountL.setLabelFor(payAmountFormattedTF);
        payAmountL.setText("Payed Amount");

        balanceL.setFont(new java.awt.Font("Tahoma", 1, 14)); // NOI18N
        balanceL.setHorizontalAlignment(javax.swing.SwingConstants.RIGHT);
        balanceL.setLabelFor(balanceTF);
        balanceL.setText("BALANCE");

        balanceTF.setEditable(false);
        balanceTF.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        balanceTF.setHorizontalAlignment(javax.swing.JTextField.RIGHT);

        purchaseJB.setBackground(new java.awt.Color(104, 252, 104));
        purchaseJB.setFont(new java.awt.Font("Calibri Light", 1, 18)); // NOI18N
        purchaseJB.setText("Purchase Item");
        purchaseJB.setToolTipText("click to record purchase");
        purchaseJB.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                purchaseJBHandler(evt);
            }
        });

        clearSaleJB.setBackground(new java.awt.Color(104, 252, 104));
        clearSaleJB.setFont(new java.awt.Font("Calibri Light", 1, 18)); // NOI18N
        clearSaleJB.setText("Clear");
        clearSaleJB.setToolTipText("click to reset all fields");
        clearSaleJB.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                clearSaleJBHandler(evt);
            }
        });

        measurementL.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        measurementL.setHorizontalAlignment(javax.swing.SwingConstants.RIGHT);
        measurementL.setLabelFor(measurementFormattedTF);
        measurementL.setText("Measurement");

        measurementCB.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        measurementCB.setModel(new javax.swing.DefaultComboBoxModel<>(new String[] { "g", "mg", "Micrograms", "Nanograms", "L", "ml", "mmol (millimols)", "Ratio", "% w/w", "% w/v", "% v/v" }));
        measurementCB.setToolTipText("select drug measurement");

        selectionCheckBox.setFont(new java.awt.Font("Tahoma", 1, 11)); // NOI18N
        selectionCheckBox.setForeground(new java.awt.Color(249, 17, 242));
        selectionCheckBox.setText("select all items in table");
        selectionCheckBox.setToolTipText("click to select all items displayed in table");
        selectionCheckBox.addItemListener(new java.awt.event.ItemListener() {
            public void itemStateChanged(java.awt.event.ItemEvent evt) {
                selectionCheckBoxHandler(evt);
            }
        });
        selectionCheckBox.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                mouseClickedHandler(evt);
            }
        });

        measurementFormattedTF.setFormatterFactory(new javax.swing.text.DefaultFormatterFactory(new javax.swing.text.NumberFormatter(new java.text.DecimalFormat("#0.00"))));
        measurementFormattedTF.setHorizontalAlignment(javax.swing.JTextField.RIGHT);
        measurementFormattedTF.setToolTipText("input value and select measurement");
        measurementFormattedTF.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N

        paymentMethodPanel.setBackground(new java.awt.Color(249, 251, 253));
        paymentMethodPanel.setBorder(javax.swing.BorderFactory.createTitledBorder(javax.swing.BorderFactory.createLineBorder(new java.awt.Color(0, 0, 0)), "Accepted Payment Methods", javax.swing.border.TitledBorder.DEFAULT_JUSTIFICATION, javax.swing.border.TitledBorder.TOP, new java.awt.Font("Tahoma", 0, 12))); // NOI18N

        mobilePayL.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        mobilePayL.setLabelFor(mobilePayDataL);
        mobilePayL.setText("Mobile Payment:");

        bankPayL.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        bankPayL.setLabelFor(bankPayDataL);
        bankPayL.setText("Bank Payment:");

        cardPayL.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        cardPayL.setLabelFor(cardPayDataL);
        cardPayL.setText("Card Payment:");

        mobilePayDataL.setFont(new java.awt.Font("Arial", 1, 12)); // NOI18N
        mobilePayDataL.setForeground(new java.awt.Color(255, 102, 0));
        mobilePayDataL.setLabelFor(mobilePayL);

        bankPayDataL.setFont(new java.awt.Font("Arial", 1, 12)); // NOI18N
        bankPayDataL.setForeground(new java.awt.Color(255, 102, 0));
        bankPayDataL.setLabelFor(bankPayL);

        cardPayDataL.setFont(new java.awt.Font("Arial", 1, 12)); // NOI18N
        cardPayDataL.setForeground(new java.awt.Color(255, 102, 0));
        cardPayDataL.setLabelFor(cardPayL);

        javax.swing.GroupLayout paymentMethodPanelLayout = new javax.swing.GroupLayout(paymentMethodPanel);
        paymentMethodPanel.setLayout(paymentMethodPanelLayout);
        paymentMethodPanelLayout.setHorizontalGroup(
            paymentMethodPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(paymentMethodPanelLayout.createSequentialGroup()
                .addContainerGap()
                .addGroup(paymentMethodPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING, false)
                    .addComponent(bankPayL, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(cardPayL, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(mobilePayL, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addGroup(paymentMethodPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(mobilePayDataL, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(bankPayDataL, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(cardPayDataL, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                .addContainerGap())
        );
        paymentMethodPanelLayout.setVerticalGroup(
            paymentMethodPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(paymentMethodPanelLayout.createSequentialGroup()
                .addGroup(paymentMethodPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(mobilePayL, javax.swing.GroupLayout.PREFERRED_SIZE, 25, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(mobilePayDataL, javax.swing.GroupLayout.PREFERRED_SIZE, 25, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(paymentMethodPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(bankPayL, javax.swing.GroupLayout.PREFERRED_SIZE, 25, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(bankPayDataL, javax.swing.GroupLayout.PREFERRED_SIZE, 25, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(paymentMethodPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(cardPayL, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addGroup(paymentMethodPanelLayout.createSequentialGroup()
                        .addComponent(cardPayDataL, javax.swing.GroupLayout.PREFERRED_SIZE, 25, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(0, 0, Short.MAX_VALUE))))
        );

        payAmountFormattedTF.setFormatterFactory(new javax.swing.text.DefaultFormatterFactory(new javax.swing.text.NumberFormatter(new java.text.DecimalFormat("#0.00"))));
        payAmountFormattedTF.setHorizontalAlignment(javax.swing.JTextField.RIGHT);
        payAmountFormattedTF.setFont(new java.awt.Font("Tahoma", 0, 12)); // NOI18N

        javax.swing.GroupLayout salesTabPanelLayout = new javax.swing.GroupLayout(salesTabPanel);
        salesTabPanel.setLayout(salesTabPanelLayout);
        salesTabPanelLayout.setHorizontalGroup(
            salesTabPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(salesTabPanelLayout.createSequentialGroup()
                .addGap(70, 70, 70)
                .addGroup(salesTabPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(selectionCheckBox)
                    .addGroup(salesTabPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                        .addGroup(salesTabPanelLayout.createSequentialGroup()
                            .addGroup(salesTabPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                .addComponent(drugNameL, javax.swing.GroupLayout.PREFERRED_SIZE, 151, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addComponent(custNameL, javax.swing.GroupLayout.PREFERRED_SIZE, 151, javax.swing.GroupLayout.PREFERRED_SIZE))
                            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                            .addGroup(salesTabPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                                .addComponent(drugNameTF, javax.swing.GroupLayout.DEFAULT_SIZE, 320, Short.MAX_VALUE)
                                .addComponent(custNameTF))
                            .addGap(18, 18, 18)
                            .addGroup(salesTabPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                                .addComponent(drugQuantityL, javax.swing.GroupLayout.DEFAULT_SIZE, 150, Short.MAX_VALUE)
                                .addComponent(measurementL, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                            .addGroup(salesTabPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                                .addGroup(salesTabPanelLayout.createSequentialGroup()
                                    .addComponent(measurementFormattedTF, javax.swing.GroupLayout.PREFERRED_SIZE, 120, javax.swing.GroupLayout.PREFERRED_SIZE)
                                    .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                    .addComponent(measurementCB, 0, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                                .addComponent(drugQuantityTF))
                            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                            .addGroup(salesTabPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                                .addComponent(addJB, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                                .addComponent(confirmJB, javax.swing.GroupLayout.DEFAULT_SIZE, 170, Short.MAX_VALUE)))
                        .addComponent(jScrollPane1, javax.swing.GroupLayout.PREFERRED_SIZE, 1154, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGroup(salesTabPanelLayout.createSequentialGroup()
                            .addGroup(salesTabPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING, false)
                                .addComponent(balanceL, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                                .addComponent(payAmountL, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                                .addComponent(totalL, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.DEFAULT_SIZE, 125, Short.MAX_VALUE))
                            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                            .addGroup(salesTabPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                .addComponent(purchaseJB, javax.swing.GroupLayout.PREFERRED_SIZE, 400, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addGroup(salesTabPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING, false)
                                    .addComponent(payAmountFormattedTF, javax.swing.GroupLayout.Alignment.LEADING)
                                    .addComponent(totalTF, javax.swing.GroupLayout.Alignment.LEADING)
                                    .addComponent(balanceTF, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.DEFAULT_SIZE, 250, Short.MAX_VALUE)))
                            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                            .addGroup(salesTabPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                                .addGroup(salesTabPanelLayout.createSequentialGroup()
                                    .addComponent(clearSaleJB, javax.swing.GroupLayout.PREFERRED_SIZE, 394, javax.swing.GroupLayout.PREFERRED_SIZE)
                                    .addGap(56, 56, 56))
                                .addComponent(paymentMethodPanel, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)))))
                .addContainerGap(121, Short.MAX_VALUE))
        );
        salesTabPanelLayout.setVerticalGroup(
            salesTabPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(salesTabPanelLayout.createSequentialGroup()
                .addGap(27, 27, 27)
                .addGroup(salesTabPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, salesTabPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                        .addComponent(drugQuantityL, javax.swing.GroupLayout.PREFERRED_SIZE, 30, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addComponent(drugQuantityTF, javax.swing.GroupLayout.PREFERRED_SIZE, 32, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addComponent(addJB, javax.swing.GroupLayout.PREFERRED_SIZE, 30, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addComponent(drugNameL, javax.swing.GroupLayout.Alignment.TRAILING, javax.swing.GroupLayout.PREFERRED_SIZE, 30, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(drugNameTF, javax.swing.GroupLayout.Alignment.TRAILING, javax.swing.GroupLayout.PREFERRED_SIZE, 30, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addGroup(salesTabPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                    .addComponent(custNameL, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addGroup(salesTabPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                        .addComponent(custNameTF, javax.swing.GroupLayout.DEFAULT_SIZE, 30, Short.MAX_VALUE)
                        .addComponent(confirmJB, javax.swing.GroupLayout.DEFAULT_SIZE, 30, Short.MAX_VALUE))
                    .addComponent(measurementL, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(measurementCB)
                    .addComponent(measurementFormattedTF))
                .addGap(15, 15, 15)
                .addComponent(jScrollPane1, javax.swing.GroupLayout.PREFERRED_SIZE, 202, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(selectionCheckBox)
                .addGap(15, 15, 15)
                .addGroup(salesTabPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                    .addGroup(salesTabPanelLayout.createSequentialGroup()
                        .addGroup(salesTabPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                            .addComponent(totalL, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                            .addComponent(totalTF, javax.swing.GroupLayout.DEFAULT_SIZE, 30, Short.MAX_VALUE))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addGroup(salesTabPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(payAmountL, javax.swing.GroupLayout.PREFERRED_SIZE, 30, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(payAmountFormattedTF, javax.swing.GroupLayout.PREFERRED_SIZE, 30, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addGroup(salesTabPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                            .addComponent(balanceL, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                            .addComponent(balanceTF, javax.swing.GroupLayout.DEFAULT_SIZE, 30, Short.MAX_VALUE)))
                    .addComponent(paymentMethodPanel, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 23, Short.MAX_VALUE)
                .addGroup(salesTabPanelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                    .addComponent(purchaseJB, javax.swing.GroupLayout.DEFAULT_SIZE, 40, Short.MAX_VALUE)
                    .addComponent(clearSaleJB, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                .addContainerGap())
        );

        jTabbedPane1.addTab("SALES        ", null, salesTabPanel, "click to record sale");

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(headerPanel, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
            .addGroup(layout.createSequentialGroup()
                .addGap(5, 5, 5)
                .addComponent(jTabbedPane1)
                .addGap(5, 5, 5))
            .addComponent(footerPanel, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addComponent(headerPanel, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(jTabbedPane1)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(footerPanel, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
        );

        headerPanel.getAccessibleContext().setAccessibleName("");

        pack();
        setLocationRelativeTo(null);
    }// </editor-fold>//GEN-END:initComponents

    private void windowOpenedHandler(java.awt.event.WindowEvent evt) {//GEN-FIRST:event_windowOpenedHandler
        // set window size to fullscreen when window is opened
        this.setExtendedState(this.MAXIMIZED_BOTH);
        // set enterprise title
        titleL.setText( PharmaDetails.getCompanyTitle() );
        // set enterprise motto/vision
        footerL.setText( PharmaDetails.getCompanyMotto() );
        /* set enterprise accepted payment options */
        mobilePayDataL.setText( PharmaDetails.getMobilePay() ); 
        bankPayDataL.setText( PharmaDetails.getBankPay() );
        cardPayDataL.setText( PharmaDetails.getCardPay() );
    }//GEN-LAST:event_windowOpenedHandler

    private void alphabeticKeyTypedHandler(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_alphabeticKeyTypedHandler
        // get typed character
        char testChar = evt.getKeyChar();
        // if not alphabetic reject character        
        if(!(Character.isAlphabetic(testChar)))  {
            evt.consume();
        }
    }//GEN-LAST:event_alphabeticKeyTypedHandler

    private void numericKeyTypedHandler(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_numericKeyTypedHandler
        // get typed character
        char testChar = evt.getKeyChar();
        // if not numeric/digit reject character        
        if(!(Character.isDigit(testChar)))  {
            evt.consume();
        }
    }//GEN-LAST:event_numericKeyTypedHandler

    private void windowClosingHandler(java.awt.event.WindowEvent evt) {//GEN-FIRST:event_windowClosingHandler
        // close database connection then exit
        database.closeDB();
        System.exit(0);
    }//GEN-LAST:event_windowClosingHandler

    private void addJBHandler(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_addJBHandler
        /* clear drugName and drugQuantity fields */
        drugNameTF.setText("");
        drugQuantityTF.setText("");
        measurementFormattedTF.setText("");
    }//GEN-LAST:event_addJBHandler

    private void clearSaleJBHandler(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_clearSaleJBHandler
        /* clear all fields in sales tab */
        drugNameTF.setText("");
        drugQuantityTF.setText("");
        measurementFormattedTF.setText("");
        custNameTF.setText("");
        measurementCB.setSelectedIndex(0);
        totalTF.setText("");
        payAmountFormattedTF.setText("");
        balanceTF.setText("");
        purchaseJB.setEnabled(true); // enable purchase button
        custom.getCustomerList().clear(); // clear list objects
        // clear table data 
        DefaultTableModel model = ( DefaultTableModel ) salesTable.getModel();
        model.getDataVector().removeAllElements();
        model.fireTableDataChanged(); // notifies the JTable that the model has changed
    }//GEN-LAST:event_clearSaleJBHandler

    private void confirmJBHandler(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_confirmJBHandler
        // confirm text fields not blank
        if(drugNameTF.getText().isBlank() || drugQuantityTF.getText().isBlank() || measurementFormattedTF.getText().isBlank()) {
            // display error message
            JOptionPane.showMessageDialog( null, "Please Fill All Fields!", "Confirm Item Error- MyPharma", JOptionPane.WARNING_MESSAGE );
        } else if(Authenticator.validateBuyQuantity(drugQuantityTF.getText()) == false) {
            // display error message
            JOptionPane.showMessageDialog( null, "Input a valid quantity in the range 1-90!", "Confirm Item Error- MyPharma", JOptionPane.WARNING_MESSAGE );
        } else {
            String measureValue = measurementFormattedTF.getValue().toString();
            String measurement = measurementCB.getSelectedItem().toString();
            // confirm item if in database
            this.totalAmount = custom.confirmDrug(  drugNameTF.getText(), 
                                                    measureValue,
                                                    measurement, 
                                                    Integer.parseInt(drugQuantityTF.getText()),
                                                    salesTable ); // end setText
            
            totalTF.setText(String.format("%,.2f", this.totalAmount));
        }
    }//GEN-LAST:event_confirmJBHandler

    private void selectionCheckBoxHandler(java.awt.event.ItemEvent evt) {//GEN-FIRST:event_selectionCheckBoxHandler
        // call class Customer func to select all table rows
        if(evt.getSource() == selectionCheckBox) {
            if(selectionCheckBox.isSelected()) {
                custom.selectRows(salesTable); // select all rows
            } else {
                ListSelectionModel model = salesTable.getSelectionModel();
                model.clearSelection(); // clear selections
            }
        }
    }//GEN-LAST:event_selectionCheckBoxHandler

    private void mouseClickedHandler(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_mouseClickedHandler
        // call class Customer func to calculate total
        totalTF.setText(String.format("%,.2f", custom.calculateTotal(salesTable)));
        //totalTF.setText(String.format("%,.2f", totalAmount));
    }//GEN-LAST:event_mouseClickedHandler

    private void purchaseJBHandler(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_purchaseJBHandler
        // confirm text fields not blank
        if(custNameTF.getText().isBlank() || payAmountFormattedTF.getText().isBlank()) {
            // display error message
            JOptionPane.showMessageDialog( null, "Please Fill Customer Name & Payed amount Fields!", "Confirm Item Error- MyPharma", JOptionPane.WARNING_MESSAGE );
        } else {
            float payAmount = Float.parseFloat(payAmountFormattedTF.getValue().toString());
            // validate payed amount
            if(payAmount >= this.totalAmount) {
                // record purchase and calculate balance 
                balanceTF.setText(String.format("%,.2f", custom.purchaseDrug( custNameTF.getText(), 
                                                                              payAmount, 
                                                                              salesTable,
                                                                              purchaseJB )) ); // end setText
                // disable button until clearing
                //purchaseJB.setEnabled(false);
                
            } else {
                // display error message
                JOptionPane.showMessageDialog( null, "Payed amount cannot be less than total amount!", "Confirm Item Error- MyPharma", JOptionPane.WARNING_MESSAGE );
            }  
        }
    }//GEN-LAST:event_purchaseJBHandler

    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        /* Set the Nimbus look and feel */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
         * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html 
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(StaffUI.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(StaffUI.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(StaffUI.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(StaffUI.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>

        /* Create and display the form */
        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                new StaffUI().setVisible(true);
            }
        });
    }

    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JButton addJB;
    private javax.swing.JLabel balanceL;
    private javax.swing.JTextField balanceTF;
    private javax.swing.JLabel bankPayDataL;
    private javax.swing.JLabel bankPayL;
    private javax.swing.JLabel cardPayDataL;
    private javax.swing.JLabel cardPayL;
    private javax.swing.JButton clearSaleJB;
    private javax.swing.JButton confirmJB;
    private javax.swing.JLabel custNameL;
    private javax.swing.JTextField custNameTF;
    private javax.swing.JLabel drugNameL;
    private javax.swing.JTextField drugNameTF;
    private javax.swing.JLabel drugQuantityL;
    private javax.swing.JTextField drugQuantityTF;
    private javax.swing.JLabel footerL;
    private javax.swing.JPanel footerPanel;
    private javax.swing.JPanel headerPanel;
    private javax.swing.JScrollPane jScrollPane1;
    private javax.swing.JTabbedPane jTabbedPane1;
    private javax.swing.JComboBox<String> measurementCB;
    private javax.swing.JFormattedTextField measurementFormattedTF;
    private javax.swing.JLabel measurementL;
    private javax.swing.JLabel mobilePayDataL;
    private javax.swing.JLabel mobilePayL;
    private javax.swing.JFormattedTextField payAmountFormattedTF;
    private javax.swing.JLabel payAmountL;
    private javax.swing.JPanel paymentMethodPanel;
    private javax.swing.JButton purchaseJB;
    private javax.swing.JPanel salesTabPanel;
    private javax.swing.JTable salesTable;
    private javax.swing.JCheckBox selectionCheckBox;
    private javax.swing.JLabel titleL;
    private javax.swing.JLabel totalL;
    private javax.swing.JTextField totalTF;
    // End of variables declaration//GEN-END:variables
}
